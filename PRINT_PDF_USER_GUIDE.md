# Print and PDF Generation User Guide

This guide explains how to use the print and PDF generation features in the Data Collection and Payment Management System.

## Overview

The system provides comprehensive print and PDF generation capabilities for all reports. You can:
- **Print reports** directly from your mobile device
- **Export reports as PDF** for sharing and archiving
- **Download server-generated PDFs** with professional formatting

## Features

### 1. Print Functionality
Print reports directly from your mobile device to any connected printer or as a virtual print to PDF.

**How to use:**
1. Navigate to the Reports screen
2. Apply any desired filters (date range, etc.)
3. Tap the **üñ®Ô∏è Print** button
4. Select your printer or "Save as PDF"
5. Complete the print job

### 2. Client-Side PDF Export
Generate a PDF instantly on your device for quick sharing.

**How to use:**
1. Navigate to the Reports screen
2. Apply any desired filters
3. Tap the **üìÑ Export PDF** button
4. The PDF will be generated and you can:
   - Share it via email, messaging apps, or cloud storage
   - Save it to your device
   - View it in a PDF reader

### 3. Server-Generated PDF Downloads
Download professionally formatted PDFs generated by the backend server with enhanced styling and layout.

**How to use:**
1. Navigate to the Reports screen
2. Apply any desired filters
3. Tap the **‚¨áÔ∏è Download** button
4. Choose the report type:
   - System Summary
   - Supplier Balances
   - Collections Summary (coming soon)
   - Payments Summary (coming soon)
   - Product Performance (coming soon)
   - Financial Summary (coming soon)
5. The PDF will be downloaded and you can share or save it

## Available Reports

### System Summary Report
Comprehensive overview of the entire system including:
- Total and active suppliers/products
- Collection and payment counts
- Financial summary with outstanding balances
- This month's activity
- Top supplier balances

### Supplier Balances Report
Detailed breakdown of supplier financial data:
- Supplier code and name
- Total collections per supplier
- Total payments per supplier
- Current balance (outstanding or credit)
- Sorted by balance amount

### Collections Summary Report (Planned)
Analysis of collection data:
- Overall collection metrics
- Breakdown by product
- Breakdown by supplier
- Date range filtering

### Payments Summary Report (Planned)
Analysis of payment data:
- Overall payment metrics
- Breakdown by payment type (advance, partial, full)
- Breakdown by supplier
- Date range filtering

### Product Performance Report (Planned)
Performance metrics for products:
- Collection counts
- Total quantities
- Total amounts
- Number of unique suppliers
- Average rates

### Financial Summary Report (Planned)
Comprehensive financial analysis:
- Total collections and payments
- Net balance
- Monthly breakdown with trends

## Tips and Best Practices

### For Mobile Users
- Use landscape orientation for better report viewing
- Ensure stable internet connection for server PDF downloads
- Review the generated PDF before sharing

### For Desktop Users
- Access reports through a web browser for larger screen viewing
- Use the print function to save to PDF with custom settings
- Combine multiple reports for comprehensive analysis

### Date Filtering
Apply date filters before generating reports:
1. Use quick filters: Today, Last 7 Days, Last 30 Days, All Time
2. Or use Custom Range for specific date periods
3. Filters apply to all PDF/print operations

### Report Quality
- **Client-side PDFs**: Fast generation, suitable for quick sharing
- **Server-side PDFs**: Professional formatting, optimized for printing and archiving
- Both include: Company header, generation timestamp, and filtered date range

## Troubleshooting

### "Failed to print report" Error
- Check printer connection
- Ensure app has printing permissions
- Try export PDF instead

### "Failed to generate PDF" Error
- Check device storage space
- Close other apps to free memory
- Restart the app if issue persists

### "Failed to download PDF from server" Error
- Check internet connection
- Verify you're logged in
- Try again in a few moments

### PDF Not Opening or Sharing
- Ensure you have a PDF reader app installed
- Check app permissions for file access
- Try downloading again

## Technical Details

### Supported Formats
- **PDF**: Portable Document Format (primary)
- **Print**: Native mobile printing protocols

### File Naming Convention
- Client-generated: `report-[timestamp].pdf`
- Server-generated: `[report-type]-[date].pdf`

### Storage Locations
- iOS: Documents directory
- Android: Documents directory
- Shared PDFs are temporarily stored and can be saved to preferred location

## Backend API Endpoints

For developers and API integration:

### PDF Generation Endpoints
All endpoints require authentication with Bearer token.

**System Summary PDF**
```
GET /api/reports/summary/pdf
Query Parameters: start_date, end_date (optional)
Response: application/pdf
```

**Supplier Balances PDF**
```
GET /api/reports/supplier-balances/pdf
Query Parameters: limit, sort, start_date, end_date (optional)
Response: application/pdf
```

**Collections Summary PDF**
```
GET /api/reports/collections-summary/pdf
Query Parameters: start_date, end_date, supplier_id, product_id (optional)
Response: application/pdf
```

**Payments Summary PDF**
```
GET /api/reports/payments-summary/pdf
Query Parameters: start_date, end_date, supplier_id (optional)
Response: application/pdf
```

**Product Performance PDF**
```
GET /api/reports/product-performance/pdf
Query Parameters: start_date, end_date (optional)
Response: application/pdf
```

**Financial Summary PDF**
```
GET /api/reports/financial-summary/pdf
Query Parameters: start_date, end_date (optional)
Response: application/pdf
```

### Example API Usage

**Using cURL:**
```bash
curl -X GET "http://your-server.com/api/reports/summary/pdf?start_date=2025-01-01&end_date=2025-12-31" \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Accept: application/pdf" \
  --output summary-report.pdf
```

**Using JavaScript/Axios:**
```javascript
const response = await axios.get('/reports/summary/pdf', {
  params: {
    start_date: '2025-01-01',
    end_date: '2025-12-31'
  },
  headers: {
    'Authorization': `Bearer ${token}`
  },
  responseType: 'blob'
});

// Create download link
const url = window.URL.createObjectURL(new Blob([response.data]));
const link = document.createElement('a');
link.href = url;
link.setAttribute('download', 'report.pdf');
document.body.appendChild(link);
link.click();
```

## Future Enhancements

Planned features for future releases:
- Email reports directly from the app
- Schedule automated report generation
- Custom report templates
- Multi-format exports (Excel, CSV)
- Report comparison and analysis tools
- Batch report generation

## Support

For issues or questions about print and PDF features:
- Check the troubleshooting section above
- Contact system administrator
- Report bugs through the app feedback system

---

**Last Updated:** December 30, 2025  
**Version:** 1.0  
**Feature Status:** Production Ready
